<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>טופס Green API - מטמיעים מובילים</title>
  <link rel="icon" href="https://i.ibb.co/f8XrnHj/image.png" type="image/png">
  <link rel="stylesheet" href="styles.css">

  <meta property="og:title" content="טופס Green API - מטמיעים מובילים">
  <meta property="og:image" content="https://i.ibb.co/f8XrnHj/image.png">
  <meta property="og:url" content="https://shayptl.github.io/automation-news">
  <meta property="og:type" content="website">
  
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>

<body>
  <div class="container">
    <img src="https://i.ibb.co/f8XrnHj/image.png" alt="Green API Logo" class="logo">
    <div id="initialContent">
      <h1>היי חברים יקרים! <span class="emoji">👋</span></h1>
      <p>כנציג של <span class="highlight">Green API</span> בישראל, אני שמח להודיע שאנחנו מתכננים להעניק
        <span class="highlight">מתנה מיוחדת למטמיעים המובילים שלנו</span>. זו דרכנו להביע את הערכתנו העמוקה לשיתוף
        הפעולה המתמשך והמוצלח שלנו.
      </p>
      <p>הטופס הזה נועד לעזור לנו להבין טוב יותר את היקף הפעילות שלכם עם Green API, ובמיוחד את מספר הלקוחות שהבאתם
        לשירות. המידע שתספקו יסייע לנו לזהות את המטמיעים שיזכו במתנה.</p>
      <p>כל תשובה חשובה לנו ותתרום לחיזוק הקשר בינינו. אנחנו מעריכים מאוד את הזמן והמחשבה שאתם משקיעים!</p>
      <p>תודה רבה על שיתוף הפעולה, ובואו נמשיך לצמוח ולהצליח יחד! <span class="emoji">🚀💚</span></p>
      <button id="showFormBtn" class="btn">למילוי הטופס</button>
    </div>

    <div id="formContent" style="display: none;">
      <p>תודה רבה שאתם מקדישים מזמנכם למלא את הטופס הזה.<span class="emoji">🙏🏻</span></p>
      <form id="userForm">
        <div class="form-group">
          <label for="userName">שם מלא:</label>
          <input type="text" id="userName" required>
        </div>
        <div class="form-group">
          <label for="userPhone">מספר טלפון:</label>
          <input type="tel" id="userPhone" required>
        </div>
        <div class="form-group">
          <label for="customerCount">כמות לקוחות שהבאת לשירות:</label>
          <input type="number" id="customerCount" required>
        </div>
        <div class="form-group">
          <label for="userNote">משהו שתרצה להוסיף:</label>
          <input type="text" id="userNote">
        </div>
        <button type="submit">שלח</button>
      </form>
    </div>

    <div id="thankYouMessage" class="thank-you">
      <p>תודה רבה על המענה! הטופס נשלח בהצלחה.</p>
      <button id="backToFormBtn" class="btn">למילוי טופס נוסף</button>
    </div>
  </div>

  <script>
    document.getElementById('showFormBtn').addEventListener('click', function() {
        document.getElementById('initialContent').style.display = 'none';
        document.getElementById('formContent').style.display = 'block';
    });

    document.getElementById('userForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const userName = document.getElementById('userName').value;
        const userPhone = document.getElementById('userPhone').value;
        const customerCount = document.getElementById('customerCount').value;
        const userNote = document.getElementById('userNote').value;

        // שליחה ל-webhook
        const webhookUrl = 'https://hook.integrator.boost.space/tzq8fgw1ohr94f9x2kjdungwb62g5kfy';

        fetch(webhookUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                name: userName,
                phone: userPhone,
                customers: customerCount,
                note: userNote
            })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(() => {
            document.getElementById('formContent').style.display = 'none';
            document.getElementById('thankYouMessage').style.display = 'block';
            document.getElementById('userForm').reset();
            
            // הפעלת אנימציית הקונפטי
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 30 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        })
        .catch((error) => {
            console.error('שגיאה בשליחה ל-webhook:', error);
            alert('אירעה שגיאה בשליחת הטופס. אנא נסה שוב מאוחר יותר.');
        });
    });

    document.getElementById('backToFormBtn').addEventListener('click', function() {
        document.getElementById('thankYouMessage').style.display = 'none';
        document.getElementById('formContent').style.display = 'block';
        document.getElementById('userForm').reset();
    });
  </script>
  <script src="script.js"></script>
</body>

</html>
